<?xml version="1.0" encoding="UTF-8" ?>
<doc xmlns="https://hyperview.org/hyperview"
     xmlns:local="https://openagents.com/hyperview-local">
  <screen style="screen">
    <styles>
      <style id="screen"
        backgroundColor="#000" />

      <style id="body"
        backgroundColor="#000"
        flex="1"
        flexDirection="column"
        alignItems="center"
        paddingTop="50" />

      <style id="device"
        backgroundColor="#000"
        borderRadius="50"
        flexDirection="column"
        justifyContent="space-between"
        alignItems="center"
        width="100%"
        flex="1"
        padding="24" />

      <style id="inputBox"
        backgroundColor="#000"
        borderRadius="18"
        flexDirection="row"
        justifyContent="space-between"
        alignItems="center"
        width="100%"
        height="74"
        marginBottom="8" />

      <style id="voiceContainer"
        flexDirection="row"
        alignItems="center"
        paddingLeft="24"
        flex="1" />

      <style id="askAnything"
        color="#515151"
        marginLeft="24"
        fontSize="16" />

      <style id="sendContainer"
        marginRight="24" />

      <style id="menuItem"
        flexDirection="row"
        alignItems="center"
        width="100%"
        marginBottom="40" />

      <style id="menuText"
        color="#666"
        fontSize="18" />

      <style id="menuIconContainer"
        width="56" />

      <style id="whiteText"
        color="#fff" />

      <style id="conversationText"
        color="#666"
        marginBottom="60"
        fontSize="18" />

      <style id="menuContainerTop"
        width="100%"
        paddingTop="12"
        paddingLeft="12"
        flexDirection="row"
        justifyContent="space-between"
        alignItems="center" />

      <style id="menuContainerBottom"
        width="100%" />

      <style id="conversationContainer"
        width="100%"
        flex="1"
        position="relative" />

      <style id="logo"
        width="256"
        height="256"
        opacity="0.5" />

      <style id="logoContainer"
        width="100%"
        height="100%"
        position="absolute"
        top="0"
        left="0"
        right="0"
        bottom="0"
        alignItems="center"
        justifyContent="center"
        zIndex="0" />

      <style id="topContainer"
        flexDirection="row"
        justifyContent="space-between"
        alignItems="center"
        width="100%"
        marginBottom="24" />

      <style id="demoButton"
        color="#fff"
        fontSize="16"
        borderWidth="1"
        borderColor="#fff"
        borderRadius="8"
        paddingVertical="8"
        paddingHorizontal="16" />

      <style id="wsOutput"
        width="100%"
        height="40%"
        padding="16"
        flexDirection="column-reverse"
        position="absolute"
        bottom="0"
        left="0"
        zIndex="1"
        scroll="true"
        scroll-orientation="vertical"
        shows-scroll-indicator="true"
        content-container-style="wsOutputContent" />

      <style id="wsOutputContent"
        flexDirection="column-reverse" />

      <style id="message"
        backgroundColor="#222"
        borderRadius="8"
        padding="16"
        marginTop="8"
        width="100%" />

      <style id="messageText"
        color="#fff"
        fontSize="16" />

      <style id="deepseekOutput"
        backgroundColor="#111"
        borderRadius="12"
        padding="16"
        marginTop="16"
        width="100%"
      />

      <style id="deepseekText"
        color="#0A84FF"
        fontSize="16"
        fontWeight="600"
        marginBottom="8"
      />

      <style id="deepseekContent"
        flexDirection="row"
        flexWrap="wrap"
        alignItems="flex-start"
      />

      <style id="deepseekChunk"
        color="#fff"
        fontSize="14"
        fontFamily="monospace"
        whiteSpace="pre"
      />

      <style id="buttonText"
        fontSize="16"
        fontWeight="500"
        color="#515151" />

      <style id="backButton"
        flexDirection="row"
        alignItems="center" />

      <style id="backArrow"
        color="#fff"
        fontSize="24"
        fontWeight="300" />

      <style id="mainContent"
        flex="1"
        width="100%"
        marginBottom="24" />

      <style id="solverContent"
        flex="1"
        width="100%" />
    </styles>

    <body style="body">
      <view style="device">
        <!-- Top Section -->
        <view style="topContainer">
          <view style="menuContainerTop">
            <view style="backButton">
              <behavior trigger="press" href="/back" />
              <local:svg src="arrow-left" width="14" height="25" />
            </view>
            <view>
              <text style="demoButton">Solve Demo Issue!</text>
              <behavior
                trigger="press"
                href="/hyperview/solve-demo-modal"
                action="new"
                show-during-load="loadingSpinner"
              />
              <spinner hide="true" id="loadingSpinner" />
            </view>
          </view>
        </view>

        <!-- Main Content -->
        <view style="mainContent">
          <view style="solverContent">
            <!-- Hide solver UI until we have a solver ID -->
            <view id="solver-ui" hide="true">
              <!-- Solver Status Section -->
              <view id="solver-status" style="statusContainer">
                <text style="statusText">Initializing solver...</text>
              </view>

              <!-- File Changes Section -->
              <view id="file-changes" style="changesContainer">
                <text style="sectionTitle">File Changes</text>
                <view style="fileList">
                  <list id="files">
                    <item key="empty">
                      <view style="emptyState">
                        <text style="emptyText">No files have been analyzed yet</text>
                      </view>
                    </item>
                  </list>
                </view>
              </view>

              <!-- Code Diffs Section -->
              <view id="code-diffs" style="diffsContainer">
                <text style="sectionTitle">Generated Changes</text>
                <view style="diffList">
                  <list id="diffs">
                    <item key="empty">
                      <view style="emptyState">
                        <text style="emptyText">No changes have been generated yet</text>
                      </view>
                    </item>
                  </list>
                </view>
              </view>
            </view>

            <!-- Keep the WebSocket output target -->
            <view style="wsOutput" id="solve-demo-output">
              <!-- When we get a solver ID, this will show the solver UI -->
              <behavior trigger="load" action="set-value" target="solver-ui" new-value="false" />
            </view>
          </view>

          <!-- Background Logo -->
          <view style="logoContainer" show-if="!solver_id">
            <local:image src="loading" style="logo" />
          </view>
        </view>
      </view>
    </body>
  </screen>

  <!-- Modal Screen for Solver Output -->
  <screen id="solverModal">
    <styles>
      <style id="modalHeader"
        backgroundColor="#111"
        flexDirection="row"
        justifyContent="space-between"
        alignItems="center"
        padding="16"
        borderBottomWidth="1"
        borderBottomColor="#333" />

      <style id="modalTitle"
        color="#fff"
        fontSize="20"
        fontWeight="600" />

      <style id="closeButton"
        color="#0A84FF"
        fontSize="16" />

      <style id="modalBody"
        backgroundColor="#000"
        flex="1" />

      <style id="outputScroll"
        flex="1"
        padding="16" />

      <style id="deepseekOutput"
        backgroundColor="#111"
        borderRadius="12"
        padding="16"
        marginTop="16"
        width="100%" />

      <style id="deepseekText"
        color="#0A84FF"
        fontSize="16"
        fontWeight="600"
        marginBottom="8" />

      <style id="deepseekChunk"
        color="#fff"
        fontSize="14"
        fontFamily="monospace"
        whiteSpace="pre" />
    </styles>

    <body style="modalBody" safe-area="true">
      <header style="modalHeader">
        <text style="modalTitle">Solving Demo Issue</text>
        <text style="closeButton" action="close" href="#">Close</text>
      </header>

      <view scroll="true" scroll-orientation="vertical" shows-scroll-indicator="true" style="outputScroll">
        <view id="deepseek-output" style="deepseekOutput">
          <text style="deepseekText">Analysis Progress:</text>
          <text id="stream-content" style="deepseekChunk" preformatted="true"></text>
        </view>
      </view>
    </body>
  </screen>
</doc>
